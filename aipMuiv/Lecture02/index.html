<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" type="text/css" href="../../lecture.css" media="screen" />
    <title>Лекция 2 - Алгоритмизация и программирование</title>
</head>
<body>
    <h1>Материалы курса Алгоритмизации и Программирования<br>
    Лекция 2 - Значения, форматы и операторы</h1>
    <cite>Преображенский М.В. 2021/22</cite>
    <p>На этой лекции мы разберёмся с тем, как именно работают переменные в Python, где они находятся и какие с ними можно выполнять операции.</p>
    <h2>Значения и форматы на физических носителях.</h2>
    <p>На картинке ниже представлено устройство компьютера. Как Вы думаете, где именно хранятся переменные значения программы?</p>
    <img src="./cpuInside.jpg" />
    <p><b>Ответ (выделить):</b> <span class="hidden">Оперативная память</span></p>
    <p>В зависимости от носителя, значения в памяти могут храниться в разной форме:</p>
    <p><img class="inline" src="./cd.jpg"/><img class="inline" src="./ssd.jpg"/></p>
    <p>В оперативной памяти значения хранятся в виде электрических сигналов и существуют только пока им подаётся электрический ток. Прекращение подачи тока "гасит" значения.</p>
    <p><B>ВАЖНО:</B> Обратите внимание, что на таком низком уровне нигде нет физических 0 или 1. Их и нигде не может быть - числа 0 и 1 не являются физическими телами, это существующие в наших головах идеи.<br>
        Мы смотрим на физическое состояние носителя в конкретном физическом секторе памяти и определяем его как цифру 0 или цифру 1 согласно некоторому заранее согласованному <b>формату</b>.</p>
    <p>Таким образом, с помощью форматов мы выделяем из набора разнообразных сигналов то, что имеет <b>значение</b>.</p>
    <p><span class="inline definition"><b class="define">Значение</b> - понятие, наделённое смыслом в рамках заранее существующей договорённости.
        <br>Например, понятия '0' и '1' имеют смысл только в рамках договорённости о двоичном коде.
        <br><b class="define">Данные</b> - значения измеримых параметров (например, в памяти компьютера).
        <br><b class="define">Формат</b> - способ считывания данных, дающий новое значение.</span></p>
    <h2>Типы данных в памяти компьютера.</h2>
    <p>Мы разобрали, где и каким образом в памяти компьютера хранятся значения 0 и 1, а так же обсудили вопрос первичного формата, позволяющего считывать эти значения с конкретного физического носителя.</p>
    <p>Теперь поговорим о том, как в компьютере могут храниться более сложные значения.</p>
    <h3>Тип данных: целое число.</h3>
    <p>Договорившись о том, как читать из физической памяти значения 0 и 1, программисты и компьютерные инженеры начали дальше договариваться о том, как читать группы 0 и 1. Так началось усложнение <b>типов данных</b>.</p>
    <p>Первой такой договорённостью стало использование 0 и 1 компьютера как цифр двоичной записи числа. Этот формат получил название <b>BIN</b> (от слова binary).<br>
        Одновременно с BIN родился формат <b>DEC</b> (decimal), представляющий соответствующее двоичному коду десятичное число.<br>
        Почти тут же возник формат HEX, в котором 4 соседних бита объединяются в 1 символ и получается шестнадцатеричное число.</p>
    <p>Примеры записи нескольких чисел в разных форматах приведены ниже:</p>
    <pre>DEC	BIN		HEX		DEC	BIN		HEX<br>
     1:	0b1      :	0x1 ;		 2:	0b10     :	0x2 ;<br>
     3:	0b11     :	0x3 ;		 4:	0b100    :	0x4 ;<br>
     5:	0b101    :	0x5 ;		 6:	0b110    :	0x6 ;<br>
     7:	0b111    :	0x7 ;		 8:	0b1000   :	0x8 ;<br>
     9:	0b1001   :	0x9 ;		10:	0b1010   :	0xa ;<br>
    11:	0b1011   :	0xb ;		12:	0b1100   :	0xc ;<br>
    13:	0b1101   :	0xd ;		14:	0b1110   :	0xe ;<br>
    15:	0b1111   :	0xf ;		16:	0b10000  :	0x10;<br>
    17:	0b10001  :	0x11;		18:	0b10010  :	0x12;<br>
    19:	0b10011  :	0x13;		20:	0b10100  :	0x14;<br>
    21:	0b10101  :	0x15;		22:	0b10110  :	0x16;<br>
    23:	0b10111  :	0x17;		24:	0b11000  :	0x18;<br>
    25:	0b11001  :	0x19;		26:	0b11010  :	0x1a;<br>
    27:	0b11011  :	0x1b;		28:	0b11100  :	0x1c;<br>
    29:	0b11101  :	0x1d;		30:	0b11110  :	0x1e;<br>
    31:	0b11111  :	0x1f;		32:	0b100000 :	0x20;<br>
    33:	0b100001 :	0x21;		34:	0b100010 :	0x22;</pre>
    <cite>Сгенерировано этим кодом на python:</cite>
    <pre class="code in-border">print(f'DEC\tBIN\t\t\tHEX\t\t\tDEC\tBIN\t\t\tHEX')
for i in range(1, 34, 2):
    print(f'{i:>2}:\t{bin(i):9}:\t{hex(i):4};\t\t{i+1:>2}:\t{bin(i+1):9}:\t{hex(i+1):4};')</pre>
    <p>Таким образом, компьютер научился представлять целые числа как <b>тип данных</b>. В большинстве современных языков программирования, включая Python, целочисленный формат обозначается как <b>int</b> (от слова integer).</p>
    <p><span class="inline definition"><b class="define">тип данных</b> - в языках программирования: формат считывания последовательности нулей и единиц, соответствующий значениям определённого вида.<br>
        <b class="define">int</b> - тип данных в языке Python, соответствующий целым числам.<br>
        Операция <b class="define">bin</b> возвращает строку с двоичной записью числа. Пример: <span class="code">bin(5)</span> вернёт "0b101".<br>
        Операция <b class="define">hex</b> возвращает строку с шестнадцатеричной записью числа. Пример: <span class="code">hex(26)</span> вернёт "0x1A".<br></span></p>
    <p>Стоит отметить, что обычно размер целого числа ограничен количеством выделяемых под него битов памяти. В языках семейства C или в Java количество бит указывается явно. Питон сам разбирается с количеством бит и не ограничивает максимальное значение (жертвуя производительностью).</p>
    <p>Так же стоит отметить, что обычно первый бит целого числа используют, чтобы показать его знак: 1 если число положительное, 0 если отрицательное.</p>
    <h3>Тип данных: число с плавающей точкой.</h3>
    <p>Научившись представлять в компьютере целочисленный формат, программисты захотели продвинуться дальше и сделать дробный формат.</p>
    <p>Так как для компьютеров было естественно делать вычисления по принципу "в столбик" (то есть поразрядные вычисления с переносом значений между разрядами), то для деления тоже был выбран удобный для вычислений в столбик формат чисел: числа с плавающей точкой.</p>
    <p>Число с плавающей точкой задаётся двумя целыми числами: <b>мантиссой</b>, содержащей число без точки и <b>порядком</b>, определяющим место точки. Ниже приведён пример использования мантиссы для десятичного числа:</p>
    <pre>Мантисса	Порядок
                -3		-2		-1		0		1		2		3
256346		256.346		2563.46		25634.6		256346.0	2563460.0	25634600.0	256346000.0</pre>
    <cite>Сгенерировано этим кодом на python:</cite>
    <pre class="code in-border">print(f'Мантисса\tПорядок\n\t\t\t', end='')
for i in range(-3, 4):
    print(f'{i}\t\t\t', end='')
mantissa = 256346
print(f'\n{mantissa}\t\t', end='')
mantissa = mantissa / 1000
for i in range(-3, 4):
    print(f'{mantissa:<12}', end='')
    mantissa *= 10</pre>
    <p><b>ВАЖНО:</b> Внутри компьютера используется <b>Двоичная мантисса</b>. То есть используется двоичное число и двоичные разряды после точки.</p>
    <p>Например, вот так будет представлено число 5.75:</p>
    <pre style="code">5.75 = 1 * 4   + 0 * 2   + 1 * 1   + 1 * 0.5    + 1 * 0.25 =
       1 * 2^2 + 0 * 2^1 + 1 * 2^0 + 1 * 2^(-1) + 1 * 2^(-2) = 0b101.11</pre>
    <p>Таким образом, из двух целых чисел получается число с плавающей точкой. По-английски "плавающий" - <b>float</b></p>
    <p><span class="inline definition"><b class="define">float</b> - тип данных в языке Python, соответствующий дробным числам.</span></p>
    <p>Стоит отметить, что использование <b>float</b> сопряжено с неточностями. Например, невозможно точно представить в двоичном формате <b>float</b> значение 1/3. Алгоритмы округления помогают, но не решают проблему целиком. Поэтому в системах требующих высокой точности всё равно приходится писать поддержку полноценных дробей.</p>
    <h3>Форматы: от целых чисел к строкам.</h3>
    <p>Первой крупной "коммерческой" (то есть по-настоящему оплачиваемой) задачей, которую решали компьютеры, было шифрование. То есть требовалось представлять не только числа, но и строки текста.</p>
    <p>Научившись представлять числа, создатели компьютеров решили поставить каждому печатному символу в точное соответствие одно число. Получились кодовые таблицы. Примеры кодовых таблиц:</p>
    <ul><li>Таблица ASCII, которая широко использовалась в 90е: <a href="https://www.industrialnets.ru/files/misc/ascii.pdf">ссылка на PDF</a></li>
        <li>Современная таблица Unicode: <a href="https://unicode-table.com/ru/#basic-latin">ссылка</a></li>
    </ul>
    <p>Таким образом, любая строка может быть представлена как последовательность числовых кодов:</p>
    <pre>Символы:	'л'  	'ю'  	'б'  	'а'  	'я'  	' '  	'с'  	'т'  	'р'  	'о'  	'к'  	'а'
Коды (unicode):	'1083'	'1102'	'1073'	'1072'	'1103'	'32'	'1089'	'1090'	'1088'	'1086'	'1082'	'1072'</pre>
    <cite>Сгенерировано этим кодом на python:</cite>
    <pre class="code in-border">line = 'любая строка'

print("Символы:\t", end='')
formatter = "'{}'"
for symbol in line:
    print(f"\t{formatter.format(symbol):5}", end='')

print("\nКоды:\t\t", end='')
for symbol in line:
    print(f"\t'{ord(symbol)}'", end='')</pre>
    <p>Строки оказались очень удобным типом данных, с которым можно делать много интересных операций. Поэтому они представлены во всех языках программирования как <b>string</b>(строка) или <b>str</b></p>
    <p><span class="inline definition"><b class="define">str</b> - тип данных в языке Python, соответствующий строкам.<br>
        Можно получить любой символ строки по индексу в квадратных скобках (первый символ - 0). Пример: <span class="code">"Привет"[2]</span> вернёт "и".<br>
        Любой символ можно преобразовать в число операцией <b class="define">ord</b>. Пример: <span class="code">ord(' ')</span> вернёт 32.<br>
        Числа можно преобразовывать в символы операцией <b class="define">chr</b>. Пример: <span class="code">chr(32)</span> вернёт <span class="code">' '</span> - строку, в которой только пробел.<br>
    </span></p>
    <h3>Тип данных: булево значение (и пара слов о комбинированных форматах).</h3>
    <p>Булево значение может принимать только одно из двух значений - <b>True</b> (Истина) или <b>False</b> (Ложь). Эти значения соответствуют одному биту данных (1 или 0) и используются в разного рода условных операторах.
        <br>Так как современные компьютеры физически неспособны считать из памяти меньше 32 бит за один раз (а у подавляющего большинства этот нижний предел уже 64 бита), то булевы значения обычно вынуждены занимать в памяти 32 бита вместо одного (как будто они лежат в очень большой пустой коробке). Поэтому эти значения часто упаковывают в более сложные типы данных.
        <br>Например, состоящие из 32 бит целое число можно считать как в формате int (целое число), а можно - в другом формате, который даёт 32 булевых значения.</p>
    <p>Подробнее о сложных форматах, комбинирующих много значений - в более поздних лекциях.</p>
    <p><span class="inline definition"><b class="define">bool</b> - тип данных в языке Python, соответствующий булевым значениям.</span></p>
    <h3>Значения и Форматы: итоги.</h3>
    <p>Вы узнали что в памяти компьютера внутри переменных хранятся <b>значения</b>, которые мы можем прочитать благодаря <b>форматам</b>.</p>
    <p>Форматы, со своей стороны, привязаны к считываемым с помощью этих форматов <b>типам данных</b>. Вы познакомились с основными типами данных в Питоне:</p>
    <ul><li><b class="define">int</b> - целые числа.</li>
        <li><b class="define">float</b> - числа с плавающей точкой.</li>
        <li><b class="define">str</b> - строки.</li>
        <li><b class="define">bool</b> - булевы значения.</li>
    </ul>
    <h2>Операции с основными типами данных.</h2>
    <p>Поговорив о том, какие основные типы данных есть в Python, обсудим теперь возможные операции над ними.</p>
    <h3>Преобразования типов данных.</h3>
    <p>В языке программирования Python можно преобразовывать данные одного типа в данные другого типа. Для этого системное название формата используется как операция со скобками.
        <br>Несколько примеров:</p>
    <ul><li><span class="code">str(52)</span> даст строку <span class="code">"52"</span></li>
        <li><span class="code">int("52")</span> даст число 52</li>
        <li><span class="code">int(3.5)</span> отбросит целую часть и даст целое число 3</li>
        <li><span class="code">int(-2.98)</span> отбросит целую часть и даст целое число -2</li>
        <li><span class="code">float(3)</span> даст число 3.0 с типом данных <b>float</b></li>
        <li><span class="code">str(23.845)</span> даст строку <span class="code">"23.845"</span></li>
        <li><span class="code">float("23.845")</span> даст число 23.845</li>
        <li><span class="code">bool(0)</span> даст False, а от любого другого числа - True</li>
        <li><span class="code">bool("")</span> (то есть от пустой строки) даст False, а от любой другой строки - True</li>
        <li><span class="code">str(True)</span> даст строку <span class="code">True</span>(аналогично с False)</li>
    </ul>
    <p><span class="define">ВНИМАНИЕ:</span> Преобразования из строк в числа могут давать ошибки, если в строке не число:</p>
    <ul><li><span class="code">float("abc")</span> даст ошибку, потому что не поймёт символ 'а'.</li>
        <li><span class="code">int("0b001")</span> даст ошибку, потому что не поймёт символ 'b'.</li>
        <li><span class="code">int("3.5")</span> даст ошибку, потому что не поймёт символ '.' (в целых нет точек).</li>
        <li><span class="code">float("3,5")</span> даст ошибку, потому что не поймёт символ ',' (дробная часть отделяется точкой).</li>
    </ul>
    <h3>Операторы.</h3>
    <p>Операторы в Питоне это комбинации из 1 или 2 символов (или иногда 1-2 предлогов), которые могут ставиться перед одним значением (<b>унарные</b> операторы) или соединять 2 значения (<b>бинарные</b> операторы).
        <br>Список операторов в Питоне можно найти по <a href = "https://pythonru.com/osnovy/operatory-python">этой ссылке</a>.
        <br>Нас пока интересуют только <b>арифметические операторы</b> и <b>оператор присваивания</b>.</p>
    <h4>Арифметические операторы:</h4>
    <p>Сложение, вычитание и умножение работают вполне обычно:</p>
    <ul><li><span class="define">Сложение</span>: <span class="code">a + b</span></li>
        <li><span class="define">Вычитание</span>: <span class="code">a - b</span></li>
        <li><span class="define">Умножение</span>: <span class="code">a * b</span></li>
    </ul>
    <p>Из-за разделения чисел на целые и плавающие, с делением немного сложно:</p>
    <ul><li><span class="define">Деление</span>: <span class="code">a / b</span></li>
        <li><span class="define">Деление нацело</span>: <span class="code">a // b</span></li>
        <li><span class="define">Остаток от деления</span>: <span class="code">a % b</span></li>
    </ul>
    <p>Так же отдельно от бинарного минуса (вычитание) стоит унарный минус (отрицание):</p>
    <ul><li><span class="define">Отрицание</span>: <span class="code">-a</span></li></ul>
    <h4>Оператор присваивания:</h4>
    <p>Любые значения (в том числе рассчитанные с помощью арифметических операторов или полученные операциями преобразования) можно присваивать переменным.</p>
    <ul><li><span class="define">Присваивание</span>: <span class="code">variable_name = (5 + 8) * 10</span></li></ul>
    <p>Оператор присваивания выполняет следующий алгоритм действий:</p>
    <ol><li>Определение порядка выполнения операций в правой части (после '=').</li>
        <li>Выполнение операций, получение результата в виде информации о типе данных и значения в форме последовательности 0 и 1, выстроенной в соответствующем типу формате.</li>
        <li>Определение места в памяти компьютера, соответствующего названию переменной.</li>
        <li>При отсутствии такого места - резервирование места под новую переменную.</li>
        <li>Сохранение в памяти, соответствующей названию переменной, информации о типе данных и последовательности 0 и 1.</li>
    </ol>
    <p>Несколько примеров без арифметических операторов:</p>
    <ul><li><span class="code">a = 5</span> сохранит в переменной a значение 5 в типе данных int.</li>
        <li><span class="code">a = "5"</span> сохранит в переменной a значение "5" в типе данных str.</li>
        <li><span class="code">a = 5.0</span> сохранит в переменной a значение 5.0 в типе данных float.</li>
        <li><span class="code">a = True</span> сохранит в переменной a значение True в типе данных bool.</li>
    </ul>
    <p>Несколько примеров с арифметическими операторами:</p>
    <ul><li><span class="code">a = 5 + 3</span> сохранит в переменной a значение 8 в типе данных int.</li>
        <li><span class="code">a = 5 + 3.0</span> сохранит в переменной a значение 8.0 в типе данных float.</li>
        <li><span class="code">a = 5 / 4</span> сохранит в переменной a значение 1.25 в типе данных float.</li>
        <li><span class="code">a = 5 // 4</span> сохранит в переменной a значение 1 в типе данных int.</li>
        <li><span class="code">a = "abc" + "def"</span> сохранит в переменной a значение "abcdef" в типе данных str.</li>
        <li><span class="code">a = "abc" * 3</span> сохранит в переменной a значение "abcabcabc" в типе данных str.</li>
    </ul>
    <p>Оператор присвоения затирает предыдущее значение переменной:</p>
    <ul><li><span class="code">a = 5 + 3</span> внутри a значение 8 в типе int</li>
        <li><span class="code">a = a / 4</span> теперь внутри a значение 2.0 в типе float.</li>
        <li><span class="code">b = str(a)</span> внутри b значение "2.0" в типе str.</li>
        <li><span class="code">c = a * 5</span> внутри c значение 10.0 в типе float.</li>
        <li><span class="code">c = b * 5</span> внутри c значение "2.02.02.02.02.0" в типе str.</li>
    </ul>
    <p>Хотя Питон и пытается предоставить максимальную свободу при использовании бинарных операторов, в некоторых случаях такие операции не имеют смысла и приводят к ошибкам:</p>
    <ul><li><span class="code">c = a + b</span> a это float, b это str. Нельзя сложить число и строку.</li>
        <li><span class="code">c = b * a</span> a это float, b это str. Нельзя повторить строку дробное число раз.</li>
        <li><span class="code">c = -b</span> b это str. Нельзя отрицать текст (можно отрицать его существование или его смысл, но сам текст отрицать бессмысленно :D).</li>
    </ul>
    <p>В таких случаях надо приводить данные к нужным типам:</p>
    <ul><li><span class="code">c = a + float(b)</span> с станет 4.0.</li>
        <li><span class="code">c = b * int(a)</span> c станет "2.02.0"</li>
    </ul>
    <h4>Сокращённое присваивание:</h4>
    <p>В ситуации когда нужно изменить переменную, применив какой-то оператор с ней самой, может использоваться сокращённая запись:</p>
    <ul><li><span class="code">a = a + b</span> идентично <span class="code">a += b</span></li>
        <li><span class="code">a = a * b</span> идентично <span class="code">a *= b</span></li>
        <li><span class="code">a = a // b</span> идентично <span class="code">a //= b</span></li>
        <li>... аналогично с другими бинарными операторами</li>
    </ul>
    <h3>Операции с типами данных: итоги.</h3>
    <p>Мы разобрали преобразования между типами данных и работу операторов, включая арифметические операторы и операторы присваивания.</p>
    <p>Это не все операции, которые возможны с типами данных и переменными. У нас осталось ещё минимум две крупные группы - индексирование и встроенные операции.
        <br>Но для начала, я думаю, вполне достаточно :)</p>
    <p>На этом лекция завершена, удачи на семинарах!</p>
</body>
