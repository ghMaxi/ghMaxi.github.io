<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" type="text/css" href="../../pre2.css" media="screen" />
    <title>Лекция 4 - Алгоритмизация и программирование</title>
</head>
<body>
<h1>Материалы курса Алгоритмизации и Программирования</h1>

<h2>Лекция 4 - "Форматирование строк и консольные программы".</h2>
<i>Преображенский М.В. 2021/22</i>

На этой лекции мы поговорим о форматировании текстовых строк и основанных на этом консольных программах.

<h2>Форматирование</h2>

Форматирование - способ вывода текстов в нужном формате с помощью формат-строк.

<h3>Формат-строки</h3>

На прошлой лекции мы обсудили разные строчные операторы, узнали как искать в строках подстроки и собирать строки из отдельных строк.
Практика программирования показала, что хотя работать таким способом можно, это не всегда удобно. Посмотрите, например, на эту программу,
которая выводила бы текущее время с точностью до секунд:
<img src="1.png"/>
Как видите, нам приходится каждое вставляемое число явно приводить к типу <c>str</c>, и суммировать его с <c>":"</c>. Когда такое приходится делать постоянно, это становится страшно неудобно.

Следующая программа делает то же самое, но используя встроенную в <c>str</c> функцию <c>format</c>. Обратите внимание на то, как фигурные скобки соответствуют положению перечисляемых в параметрах функции значений:
<img src="2.png"/>
Функция <c>format</c> оказалась настолько удобной, что для неё даже сделали специальную отдельную форму записи, которая получила название <def>f-строки</def>
<img src="3.png"/>
<defblock><def>f-строка</def> - особый вид строки, начинающийся с буквы f перед кавычками, в которую можно вставлять переменные в фигурных скобках.
Значения переменных внутри f-строки могут быть <c>str</c>, но могут им и не быть (и тогда выводится в строку будут их строчные представления)
Саму строку внутри кавычек называют формат-строкой. В случае с использованием f-строки строка задаётся жёстко. В случае с использованием <c>.format</c> можно предварительно настраивать саму формат-строку.</defblock>

<b>Упражнение:</b>
Напишите и запустите следующую программу. Попробуйте объяснить, каким образом она собирает получающийся в результате текстовый вывод:
<img src="4.png" />


<h3>Форматирование внутри формат-строк:</h3>

Если Вы запустите такую программу:
<img src="5.png" />
То Вы получите такой вывод:
<img src="6.png" />
Как не сложно понять, в этом выводе проблема - в обычном временном формате если минут или секунд меньше 10, то спереди пишут 0. Если нарушать это правило, то читать время становится решительно неудобно.

Можно решать эту проблему так (и её часто так решали):
<img src="7.png" />
Но на практике подобные проблемы возникали настолько часто, что для них в рамках форматирования строк придумали особое решение: <def>форматирование</def>. Например, использование такой формат-строки:
<img src="8.png" />
Даст такой результат:
<img src="9.png" />
<defblock><def>Форматирование</def> - применение стандартных модификаций к строчному представлению переменных внутри формат-строки.
    В современной версии Python это модификации прописываются внутри фигурных скобок формат-строки после двоеточия.</defblock>

Документация по форматам в Питоне (как в старом стиле так и в интересном нам современном стиле) находится здесь: <a href="https://pyformat.info/">https://pyformat.info/</a>

<c>САМОСТОЯТЕЛЬНОЕ ЗАДАНИЕ</c>: разберите все представленные по ссылке способы форматирования строк. Протестируйте их работу на небольших программах.

<h2>Консольные приложения</h2>

Консольные приложения запускаются из консоли и работают в ней. Например, сам <c>python.exe</c> - консольное приложение!
Часто первые версии программ являются консольными приложениями!

<h3>Пример консольного приложения</h3>

Одним из распространённых примеров консольных приложений являются текстовые приключения.
Современные консоли обычно дают больше возможностей, чем простое текстовое форматирование. Например, они позволяют отображать текст разных размеров и цвета, а так же работать мышкой. Ниже приведено два скриншота из игры с сайта <a href="https://textadventures.co.uk/">textadventures.co.uk/</a>. Как Вы думаете, какие элементы этой игры можно реализовать с использованием стандартных инструментов форматирования в Python?
<img src="10.png" />

Ниже приведён код, который мог бы составить основу для похожей игры:
<img src="11.png" />
Разберитесь, как этот код работает! Попробуйте вывести на экран значение <c>status_format_line</c> и разберитесь, как оно получилось. Поймите, как вызов <c>format</c> от <c>status_format_line</c> даёт шапку таблицы, и как именно внутри используются другие строки.

Сделайте так, чтобы можно было дальше выполнять шаги в этой игре, меняя параметры, приходя к победе или поражению.
</body>
